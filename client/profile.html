<script>
const editBtn = document.getElementById("editBtn");
const form = document.getElementById("editForm");

// toggle mostrar form
editBtn.onclick = () => {
  form.style.display =
    form.style.display === "none" ? "block" : "none";
};

// cargar datos
async function load() {
  const res = await fetch("/me");
  const u = await res.json();

  document.getElementById("name").textContent = u.username || "";

  if (u.avatar)
    document.getElementById("avatar").src = u.avatar;

  if (u.banner)
    document.getElementById("banner").src = u.banner;

  document.getElementById("bio").textContent = u.bio || "";

  const badge = document.getElementById("badge");

  // ===== BADGES =====
  if (u.role === "admin") {
    badge.textContent = "‚≠ê Admin";
  } 
  else if (u.role === "mod") {
    badge.textContent = "üîπ Moderador";
  }

  // ===== HTML PERSONALIZADO SOLO STAFF =====
  if ((u.role === "admin" || u.role === "mod") && u.custom_html) {
    document.body.insertAdjacentHTML("beforeend", u.custom_html);
  }
}

load();
</script>
